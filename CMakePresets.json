{
  "version": 8,
  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 28,
    "patch": 0
  },
  "configurePresets": [
      {
          "name": "ci",
          "generator": "Ninja",
          "binaryDir": "${sourceDir}/build",
          "cacheVariables": {
              "CMAKE_BUILD_TYPE": "Release",
              "CMAKE_VERIFY_HEADER_SETS": {
                  "type": "BOOL",
                  "value": "ON"
              },
              "DISCOVER_TESTS": {
                  "type": "BOOL",
                  "value": "OFF"
              },
              "BUILD_VSIX": {
                  "type": "BOOL",
                  "value": "OFF"
              },
              "CMAKE_RUNTIME_OUTPUT_DIRECTORY": "${sourceDir}/build/bin"
          },
          "environment": {
          }
      },
      {
          "name": "ci-sanitizer",
          "inherits": "ci",
          "cacheVariables": {
              "CMAKE_C_COMPILER": "clang-18",
              "CMAKE_CXX_COMPILER": "clang++-18"
          },
          "hidden": true
      },
      {
          "name": "ci-sanitizer-asan",
          "inherits": "ci-sanitizer",
          "cacheVariables": {
              "CMAKE_CXX_FLAGS": "-fsanitize=address,undefined"
          }
      },
      {
          "name": "ci-sanitizer-tsan",
          "inherits": "ci-sanitizer",
          "cacheVariables": {
              "CMAKE_CXX_FLAGS": "-fsanitize=thread"
          }
      },
      {
          "name": "ci-linux_x64",
          "inherits": "ci",
          "cacheVariables": {
              "CMAKE_EXE_LINKER_FLAGS": "-static"
          }
      },
      {
          "name": "ci-linux_arm64",
          "inherits": "ci",
          "cacheVariables": {
              "CMAKE_SYSTEM_NAME": "Linux",
              "CMAKE_C_COMPILER": "aarch64-linux-musl-gcc",
              "CMAKE_CXX_COMPILER": "aarch64-linux-musl-g++",
              "CMAKE_EXE_LINKER_FLAGS": "-static -Wl,--gc-sections"
          }
      },
      {
          "name": "ci-linux_s390x",
          "inherits": "ci",
          "cacheVariables": {
              "CMAKE_SYSTEM_NAME": "Linux",
              "CMAKE_C_COMPILER": "s390x-linux-musl-gcc",
              "CMAKE_CXX_COMPILER": "s390x-linux-musl-g++",
              "CMAKE_EXE_LINKER_FLAGS": "-static -Wl,--gc-sections"
          }
      },
      {
          "name": "ci-wasm",
          "inherits": "ci",
          "cacheVariables": {
              "CMAKE_TOOLCHAIN_FILE": "/emsdk/upstream/emscripten/cmake/Modules/Platform/Emscripten.cmake",
              "CMAKE_CXX_FLAGS": "-s USE_PTHREADS=1 -fwasm-exceptions -std=c++20",
              "CMAKE_EXE_LINKER_FLAGS": "-s PTHREAD_POOL_SIZE=8 -s MAXIMUM_MEMORY=2147418112 -s INITIAL_MEMORY=268435456 -s ALLOW_MEMORY_GROWTH=1 -s PROXY_TO_PTHREAD=1 -s MODULARIZE=1 -s EXIT_RUNTIME=1 --bind -s STACK_SIZE=4MB -fwasm-exceptions --extern-post-js ${sourceDir}/cmake/wasm_post.js",
              "CMAKE_CROSSCOMPILING_EMULATOR": "node",
              "gtest_disable_pthreads": {
                  "type": "BOOL",
                  "value": "ON"
              }
          }
      },
      {
          "name": "ci-win32_x64",
          "inherits": "ci",
          "generator": "Visual Studio 17 2022"
      },
      {
          "name": "ci-win32_arm64",
          "inherits": "ci",
          "generator": "Visual Studio 17 2022",
          "cacheVariables": {
              "CMAKE_SYSTEM_NAME": "Windows",
              "CMAKE_SYSTEM_VERSION": "10",
              "CMAKE_GENERATOR_PLATFOR": "ARM64"
          }
      },
      {
          "name": "ci-darwin_x64",
          "inherits": "ci",
          "cacheVariables": {
              "LLVM_PATH": "$env{LLVM_PATH}",
              "CMAKE_C_COMPILER": "$env{LLVM_PATH}/bin/clang",
              "CMAKE_CXX_COMPILER": "$env{LLVM_PATH}/bin/clang++",
              "APPLE_STATIC_CRT": {
                  "type": "BOOL",
                  "value": "ON"
              }
          }
      },
      {
          "name": "ci-darwin_arm64",
          "inherits": "ci",
          "cacheVariables": {
              "LLVM_PATH": "$env{LLVM_PATH}",
              "CMAKE_C_COMPILER": "$env{LLVM_PATH}/bin/clang",
              "CMAKE_CXX_COMPILER": "$env{LLVM_PATH}/bin/clang++",
              "APPLE_STATIC_CRT": {
                  "type": "BOOL",
                  "value": "ON"
              }
          }
      }
  ]
}
